schema: '2.0'
stages:
  process:
    cmd: python src/process_data.py
    deps:
    - path: data/raw
      md5: 3ab2fa89af88fa75de21542ec710c4ba.dir
      size: 222379
      nfiles: 2
    - path: src/process_data.py
      md5: b1a8b8118eca26786adc5acb8b254d05
      size: 2782
    params:
      params.yaml:
        data:
          raw: data/raw/marketing_campaign.csv
          scaled: data/intermediate/scaled_data.pkl
          pca: data/intermediate/pca_data.pkl
          final: data/final/segmented_data.pkl
        process:
          name: process_2
          keep_columns:
          - Income
          - Recency
          - NumWebVisitsMonth
          - Complain
          - age
          - total_purchases
          - enrollment_years
          - family_size
          remove_outliers_threshold:
            age: 90
            Income: 600000
          encode:
            family_size:
              Married: 2
              Together: 2
              Absurd: 1
              Widow: 1
              YOLO: 1
              Divorced: 1
              Single: 1
              Alone: 1
    outs:
    - path: data/intermediate/scaled_data.pkl
      md5: 86ec80e2db839ec329ede117cd4f4878
      size: 142368
    - path: scaler
      md5: 2a77a8b27af167f7cc0c045c483cfdc2.dir
      size: 1239
      nfiles: 1
  train:
    cmd: python src/segment.py
    deps:
    - path: data/intermediate/scaled_data.pkl
      md5: 86ec80e2db839ec329ede117cd4f4878
      size: 142368
    - path: src/segment.py
      md5: 06a6d5f5c14f9eb32405585830964b69
      size: 2015
    params:
      params.yaml:
        data:
          raw: data/raw/marketing_campaign.csv
          scaled: data/intermediate/scaled_data.pkl
          pca: data/intermediate/pca_data.pkl
          final: data/final/segmented_data.pkl
        model: model/kmeans.pkl
        pca:
          n_components: 3
          columns:
          - col1
          - col2
          - col3
        scaler: scaler/standard_scaler.pkl
        segment:
          algorithm: KMeans
          args:
            n_clusters: 8
            n_init: auto
    outs:
    - path: data/intermediate/pca_data.pkl
      md5: 6f20e2b14db5267639477c0cee04abe3
      size: 53793
    - path: image/elbow.png
      md5: 38db0a05bc50d9f80dd597e17d6cb8e1
      size: 58027
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/intermediate
      md5: bcfa189f2e9c87103b50a09783bf9b6d.dir
      size: 196161
      nfiles: 2
    - path: scaler
      md5: 2a77a8b27af167f7cc0c045c483cfdc2.dir
      size: 1239
      nfiles: 1
    - path: src/evaluate.py
      md5: 65c87a9c5583cff6c73eb3e087f26a4e
      size: 2426
    params:
      params.yaml:
        data:
          raw: data/raw/marketing_campaign.csv
          scaled: data/intermediate/scaled_data.pkl
          pca: data/intermediate/pca_data.pkl
          final: data/final/segmented_data.pkl
        image:
          elbow: image/elbow.png
          clusters: image/cluster.png
        model: model/kmeans.pkl
        scaler: scaler/standard_scaler.pkl
    outs:
    - path: data/final
      md5: b61ae993a9695b926746dda0aad180ae.dir
      size: 151309
      nfiles: 1
    - path: dvclive/metrics.json
      md5: 2e91e2f49df73ac266aca2d1e1c47848
      size: 46
    - path: image/cluster.png
      md5: 1c6118436ba2bf2ef5c5d7de4475bd63
      size: 154073
